---
test_name: Endpoints _ 1. Add New User

includes:
  - !include includes.yaml

strict:
  - json:off

stages:
  - name: Add new user

    request:
      url: http://{host:s}:{port:d}/api/users
      follow_redirects: true
      method: POST
      json:
        username: "testUser12"

    response:
      status_code: [200, 201]
      save:
        json:
          user_id: id


  - name: Delete the user

    request:
      url: http://{host:s}:{port:d}/api/user/{user_id}/
      follow_redirects: true
      method: DELETE
      timeout: 1.0

    response:
      status_code: [200, 201]
      json:
        status: 0
        message: "User deleted"

---
test_name: Endpoints _ 2. Fetch New User

includes:
  - !include includes.yaml

strict:
  - json:off

stages:
  - name: Add new User

    request:
      url: http://{host:s}:{port:d}/api/users
      follow_redirects: true
      method: POST
      json:
        username: "testUser14"

    response:
      status_code: [200, 201]
      save:
        json:
          user_id: id

  - name: Fetch new user

    request:
      url: http://{host:s}:{port:d}/api/user/{user_id}/
      follow_redirects: true
      method: GET
      timeout: 1.0

    response:
      status_code: 200
      json:
        username: "testUser14"

  - name: Delete the user

    request:
      url: http://{host:s}:{port:d}/api/user/{user_id}/
      follow_redirects: true
      method: DELETE
      timeout: 1.0

    response:
      status_code: [200, 201]
      json:
        status: 0
        message: "User deleted"

---
test_name: Endpoints _ 4. Update user

includes:
  - !include includes.yaml

strict:
  - json:off

stages:
  - name: Add new user

    request:
      url: http://{host:s}:{port:d}/api/users
      follow_redirects: true
      method: POST
      json:
        username: "testUser11"

    response:
      status_code: [200, 201]
      save:
        json:
          user_id: id

  - name: Update user

    request:
      url: http://{host:s}:{port:d}/api/user/{user_id}/
      follow_redirects: true
      method: PUT
      json:
        username: "testUser Updated"
      timeout: 1.0

    response:
      status_code: [200, 201]
      json:
        status: 0
        message: "User updated"

  - name: Retrieve the updated user

    request:
      url: http://{host:s}:{port:d}/api/user/{user_id}/
      follow_redirects: true
      method: GET
      timeout: 1.0

    response:
      status_code: 200
      json:
        username: "testUser Updated"

  - name: Delete the user

    request:
      url: http://{host:s}:{port:d}/api/user/{user_id}/
      follow_redirects: true
      method: DELETE
      timeout: 1.0

    response:
      status_code: [200, 201]
      json:
        status: 0
        message: "User deleted"

---
test_name: Endpoints _ 5. Modify user

includes:
  - !include includes.yaml

strict:
  - json:off

stages:
  - name: Add new user

    request:
      url: http://{host:s}:{port:d}/api/users
      follow_redirects: true
      method: POST
      json:
        username: "testUser"

    response:
      status_code: [200, 201]
      save:
        json:
          user_id: id

  - name: Modify user

    request:
      url: http://{host:s}:{port:d}/api/user/{user_id}/
      follow_redirects: true
      method: PATCH
      json:
        username: "ModifiedUserName"
      timeout: 1.0

    response:
      status_code: [200, 201]
      json:
        status: 0
        message: "User modified"

  - name: Retrieve the modified user

    request:
      url: http://{host:s}:{port:d}/api/user/{user_id}/
      follow_redirects: true
      method: GET
      timeout: 1.0

    response:
      status_code: 200
      json:
        username: "ModifiedUserName"


  - name: Delete the user

    request:
      url: http://{host:s}:{port:d}/api/user/{user_id}/
      follow_redirects: true
      method: DELETE
      timeout: 1.0

    response:
      status_code: [200, 201]
      json:
        status: 0
        message: "User deleted"

---
test_name: Endpoints _ 6. Delete user

includes:
  - !include includes.yaml

strict:
  - json:off

stages:
  - name: Add new user

    request:
      url: http://{host:s}:{port:d}/api/users
      follow_redirects: true
      method: POST
      json:
        username: "testUser"

    response:
      status_code: [200, 201]
      save:
        json:
          user_id: id

  - name: Delete the user

    request:
      url: http://{host:s}:{port:d}/api/user/{user_id}/
      follow_redirects: true
      method: DELETE
      timeout: 1.0

    response:
      status_code: [200, 201]
      json:
        status: 0
        message: "User deleted"

  - name: Retrieve the deleted user

    request:
      url: http://{host:s}:{port:d}/api/user/{user_id}/
      follow_redirects: true
      method: GET
      timeout: 1.0

    response:
      status_code: [404]









---
test_name: Endpoints _ 7. Add New Program

includes:
  - !include includes.yaml

strict:
  - json:off

stages:
  - name: Add new Programs

    request:
      url: http://{host:s}:{port:d}/api/programs
      follow_redirects: true
      method: POST
      json:
        name: "Test program"
        description: "Test description"
        date: "Test date"

    response:
      status_code: [200, 201]
      save:
        json:
          program_id: id


  - name: Delete the program

    request:
      url: http://{host:s}:{port:d}/api/program/{program_id}/
      follow_redirects: true
      method: DELETE
      timeout: 1.0

    response:
      status_code: [200, 201]
      json:
        status: 0
        message: "program deleted"

---
test_name: Endpoints _ 8. Fetch New Program

includes:
  - !include includes.yaml

strict:
  - json:off

stages:
  - name: Add new Program

    request:
      url: http://{host:s}:{port:d}/api/programs
      follow_redirects: true
      method: POST
      json:
        name: "Test program"
        description: "Test description"
        date: "Test date"
    response:
      status_code: [200, 201]
      save:
        json:
          program_id: id

  - name: Fetch new Program

    request:
      url: http://{host:s}:{port:d}/api/program/{program_id}/
      follow_redirects: true
      method: GET
      timeout: 1.0

    response:
      status_code: 200
      json:
        name: "Test program"
        description: "Test description"
        date: "Test date"
  - name: Delete the program

    request:
      url: http://{host:s}:{port:d}/api/program/{program_id}/
      follow_redirects: true
      method: DELETE
      timeout: 1.0

    response:
      status_code: [200, 201]
      json:
        status: 0
        message: "program deleted"

---
test_name: Endpoints _ 9. Update program

includes:
  - !include includes.yaml

strict:
  - json:off

stages:
  - name: Add new program

    request:
      url: http://{host:s}:{port:d}/api/programs
      follow_redirects: true
      method: POST
      json:
        name: "Test program"
        description: "Test description"
        date: "Test date"
    response:
      status_code: [200, 201]
      save:
        json:
          program_id: id

  - name: Update program

    request:
      url: http://{host:s}:{port:d}/api/program/{program_id}/
      follow_redirects: true
      method: PUT
      json:
        name: "Updated test program"
        description: "Updated Test description"
        date: "Updated Test date"
      timeout: 1.0

    response:
      status_code: [200, 201]
      json:
        status: 0
        message: "program updated"

  - name: Retrieve the updated program

    request:
      url: http://{host:s}:{port:d}/api/program/{program_id}/
      follow_redirects: true
      method: GET
      timeout: 1.0

    response:
      status_code: 200
      json:
        name: "Updated test program"
        description: "Updated Test description"
        date: "Updated Test date"

  - name: Delete the program

    request:
      url: http://{host:s}:{port:d}/api/program/{program_id}/
      follow_redirects: true
      method: DELETE
      timeout: 1.0

    response:
      status_code: [200, 201]
      json:
        status: 0
        message: "program deleted"

---
test_name: Endpoints _ 10. Modify program

includes:
  - !include includes.yaml

strict:
  - json:off

stages:
  - name: Add new program

    request:
      url: http://{host:s}:{port:d}/api/programs
      follow_redirects: true
      method: POST
      json:
        name: "Test program"
        description: "Test description"
        date: "Test date"
    response:
      status_code: [200, 201]
      save:
        json:
          program_id: id

  - name: Modify program

    request:
      url: http://{host:s}:{port:d}/api/program/{program_id}/
      follow_redirects: true
      method: PATCH
      json:
        name: "Modified program name"
      timeout: 1.0

    response:
      status_code: [200, 201]
      json:
        status: 0
        message: "program modified"

  - name: Retrieve the modified program

    request:
      url: http://{host:s}:{port:d}/api/program/{program_id}/
      follow_redirects: true
      method: GET
      timeout: 1.0

    response:
      status_code: 200
      json:
        name: "Modified program name"


  - name: Delete the program

    request:
      url: http://{host:s}:{port:d}/api/program/{program_id}/
      follow_redirects: true
      method: DELETE
      timeout: 1.0

    response:
      status_code: [200, 201]
      json:
        status: 0
        message: "program deleted"

---
test_name: Endpoints _ 11. Delete program

includes:
  - !include includes.yaml

strict:
  - json:off

stages:
  - name: Add new program

    request:
      url: http://{host:s}:{port:d}/api/programs
      follow_redirects: true
      method: POST
      json:
        name: "Test program"
        description: "Test description"
        date: "Test date"


    response:
      status_code: [200, 201]
      save:
        json:
          program_id: id

  - name: Delete the program

    request:
      url: http://{host:s}:{port:d}/api/program/{program_id}/
      follow_redirects: true
      method: DELETE
      timeout: 1.0

    response:
      status_code: [200, 201]
      json:
        status: 0
        message: "program deleted"

  - name: Retrieve the deleted program

    request:
      url: http://{host:s}:{port:d}/api/program/{program_id}/
      follow_redirects: true
      method: GET
      timeout: 1.0

    response:
      status_code: [404]